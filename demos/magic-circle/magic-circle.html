<!doctype html>

<html>
	<head>
		<title>Page Title</title>
		<meta charset="UTF-8">
		<meta name="viewport" content="initial-scale=1.0">
		<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.8/p5.js"></script>
		<script>
			let objects = []; // objects to animate
			let count = 0;
		  	let time = 0, lastTime = 0;
			function setup() {
				createCanvas(720, 400);
				stroke(0);
				noFill()
				frameRate(60);
				background(255);
				
				// add a circle to draw
				objects.push({
					type: "circle",
					animations: [{
						prop: "endAngle",
						first: 0,
						last: TWO_PI,
						duration: 2000, // milliseconds
						progress: 0
					}],
					x: width / 2,
					y: height / 2,
					radius: 200,
					startAngle: 0,
					endAngle: 0
				})
			}
			
			function draw() { 
				background(255);
				lastTime = time;
				time = millis();
				let diff = time - lastTime;
				console.log(diff);
				for (let i = 0; i < objects.length; i++) {
					let o = objects[i];
					
					
					if (o.type === "circle") {
						// update circle properties
						for (let j = 0; j < o.animations.length; j++) {
							let anim = o.animations[j];
							
							anim.progress = min(anim.progress + diff, anim.duration);
							console.log(anim.progress);
							o[anim.prop] = lerp(anim.first, anim.last, anim.progress / anim.duration);
							// TODO how to remove animations that are done?
						}
						
						// draw circle
						arc(o.x, o.y, o.radius, o.radius, o.startAngle, o.endAngle);
					}
				}
				
			  
			  // limit the amount of time the animation runs
				count++;
				if (count > 200) {
					noLoop();
				}
			}
			
		</script>
	</head>

	<body>

	</body>
</html>